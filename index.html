
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-b1fca87b.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e033bdd3.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell--ocarina&quot;,&quot;plaintext--uploader&quot;,&quot;json--raw&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-19e16686.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell--ocarina">ocarina</a>
              <a href="#" data-language-name="plaintext--uploader">uploader</a>
              <a href="#" data-language-name="json--raw">json</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#malleable-all-seeing-journal-of-research-artifacts" class="toc-h2 toc-link" data-title="Malleable All-seeing Journal Of Research Artifacts">Malleable All-seeing Journal Of Research Artifacts</a>
                  </li>
                  <li>
                    <a href="#important-notes" class="toc-h2 toc-link" data-title="Important notes">Important notes</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#biosamples" class="toc-h1 toc-link" data-title="Biosamples">Biosamples</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#add-one-or-more-biosamples-to-majora" class="toc-h2 toc-link" data-title="Add one or more biosamples to Majora">Add one or more biosamples to Majora</a>
                  </li>
                  <li>
                    <a href="#add-one-or-more-empty-biosamples-to-majora" class="toc-h2 toc-link" data-title="Add one or more empty biosamples to Majora">Add one or more empty biosamples to Majora</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#library" class="toc-h1 toc-link" data-title="Library">Library</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#add-a-sequencing-library-to-majora" class="toc-h2 toc-link" data-title="Add a sequencing library to Majora">Add a sequencing library to Majora</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#sequencing" class="toc-h1 toc-link" data-title="Sequencing">Sequencing</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#add-a-sequencing-run-to-majora" class="toc-h2 toc-link" data-title="Add a sequencing run to Majora">Add a sequencing run to Majora</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#published-artifact-group" class="toc-h1 toc-link" data-title="Published Artifact Group">Published Artifact Group</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#suppress-a-published-artifact-group-pag-from-the-data-set" class="toc-h2 toc-link" data-title="Suppress a Published Artifact Group (PAG) from the data set">Suppress a Published Artifact Group (PAG) from the data set</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1><h2 id='malleable-all-seeing-journal-of-research-artifacts'>Malleable All-seeing Journal Of Research Artifacts</h2>
<p>Majora is a Django-based wet-and-dry information management system. Majora is being rapidly developed as part of the COVID-19 Genomics UK Consortium (COG-UK) response to the outbreak of SARS-CoV-2.</p>

<p>Majora is a system that stores metadata on biological samples, sequencing runs, bioinformatics pipelines and files. These different items are referred to generally, as &quot;artifacts&quot;. Majora is composed of three main parts:</p>

<ul>
<li>a database that defines &quot;models&quot; that represent artifacts such as samples and files,</li>
<li>a web interface that allows access to basic metadata shared about artifacts,</li>
<li>an &quot;API&quot; that provides an interface for other tools and programs to view and edit information about artifacts</li>
</ul>

<p>This documentation attempts to cover all bases by showing all the fields for each of the artifacts and processes that can be added, updated and retrieved from Majora.
Although intended primarily for users who wish to write a computer program to use the API or users of the <a href="https://github.com/SamStudio8/ocarina/">Ocarina command line tool</a>, it should be useful for users of the CGPS metadata uploader.
Users of the uploader will likely also want to refer to the documentation for the <a href="https://metadata.docs.cog-uk.io/">metadata uploader</a>.</p>

<p>You may be interested to know that this API documentation page was created with <a href="https://github.com/slatedocs/slate">Slate</a>.</p>
<h2 id='important-notes'>Important notes</h2>
<ul>
<li>Submitting a request for an artifact that already exists will allow you to change some properties of that object. The messages response will let you know if this is not the case.</li>
<li>Sending a request to update an artifact that already exists is an overwriting operation. If you submit blank fields, those fields will be irreversibly deleted from the model.</li>
<li>If metadata is missing, send a blank field or do not submit the field at all. Do not submit &#39;unknown&#39; or &#39;null&#39; or any other text that attempts to explain that the field is missing.</li>
</ul>
<h1 id='authentication'>Authentication</h1>
<ul>
<li><a href="https://metadata.docs.cog-uk.io/bulk-upload-1">Authentication with the CGPS Uploader</a></li>
<li><a href="https://github.com/SamStudio8/ocarina#configuration">Authentication with Ocarina (API key)</a></li>
<li><a href="https://docs.covid19.climb.ac.uk/oauth-app">Authentication with Ocarina (OAuth)</a></li>
</ul>
<h1 id='biosamples'>Biosamples</h1>
<h2 id='add-one-or-more-biosamples-to-majora'>Add one or more biosamples to Majora</h2>

<p><code>/artifact/biosample/add/</code></p>

<h3 id='attributes'>Attributes</h3><div class="highlight"><pre class="highlight json tab-json--raw"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"biosamples"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"adm1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UK-ENG"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"adm2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Birmingham"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"adm2_private"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B20"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"admitted_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"admitted_hospital_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"admitted_hospital_trust_or_board"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"admitted_with_covid_diagnosis"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"anonymised_care_home_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"biosample_source_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC12345"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"central_sample_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BIRM-12345"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"collecting_org"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hypothetical University of Hooting"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"collection_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-03"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"collection_pillar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"employing_hospital_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"employing_hospital_trust_or_board"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_care_home_resident"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_care_home_worker"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_hcw"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_hospital_patient"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_icu_patient"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_surveillance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Y"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"epi"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"epi_cluster"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CLUSTER8"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"investigation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"investigation_cluster"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ward 0"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"investigation_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"West Midlands HCW"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"investigation_site"</span><span class="p">:</span><span class="w"> </span><span class="s2">"QEHB"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"ct"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"records"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"ct_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"test_kit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INHOUSE"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"test_platform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INHOUSE"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"test_target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ORF8"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"received_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-04"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"root_sample_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHA12345"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sample_type_collected"</span><span class="p">:</span><span class="w"> </span><span class="s2">"swab"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sample_type_received"</span><span class="p">:</span><span class="w"> </span><span class="s2">"primary"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sender_sample_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LAB12345"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source_age"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source_sex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"swab_site"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nose-throat"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6e06392f-e030-4cf9-911a-8dc9f2d4e714"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"majora-sam"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote class="lang-specific shell--ocarina"><p>Minimal Ocarina command with mandatory parameters:</p></blockquote>
<div class="highlight"><pre class="highlight shell tab-shell--ocarina"><code>ocarina put biosample <span class="se">\</span>
    <span class="nt">--adm1</span> UK-ENG <span class="se">\</span>
    <span class="nt">--central-sample-id</span> BIRM-12345 <span class="se">\</span>
    <span class="nt">--collection-date</span> 2020-06-03 <span class="se">\</span>
    <span class="nt">--is-surveillance</span> Y 
</code></pre></div>
<blockquote class="lang-specific shell--ocarina"><p>Full Ocarina command example:</p></blockquote>
<div class="highlight"><pre class="highlight shell tab-shell--ocarina"><code>ocarina put biosample <span class="se">\</span>
    <span class="nt">--adm1</span> UK-ENG <span class="se">\</span>
    <span class="nt">--central-sample-id</span> BIRM-12345 <span class="se">\</span>
    <span class="nt">--collection-date</span> 2020-06-03 <span class="se">\</span>
    <span class="nt">--is-surveillance</span> Y <span class="se">\</span>
    <span class="nt">--received-date</span> 2020-06-04 <span class="se">\</span>
    <span class="nt">--adm2</span> Birmingham <span class="se">\</span>
    <span class="nt">--source-age</span> 29 <span class="se">\</span>
    <span class="nt">--source-sex</span> F <span class="se">\</span>
    <span class="nt">--adm2-private</span> B20 <span class="se">\</span>
    <span class="nt">--biosample-source-id</span> ABC12345 <span class="se">\</span>
    <span class="nt">--collecting-org</span> <span class="s1">'Hypothetical University of Hooting'</span> <span class="se">\</span>
    <span class="nt">--collection-pillar</span> 2 <span class="se">\</span>
    <span class="nt">--root-sample-id</span> PHA12345 <span class="se">\</span>
    <span class="nt">--sample-type-collected</span> swab <span class="se">\</span>
    <span class="nt">--sample-type-received</span> primary <span class="se">\</span>
    <span class="nt">--sender-sample-id</span> LAB12345 <span class="se">\</span>
    <span class="nt">--swab-site</span> nose-throat 
</code></pre></div>
<blockquote class="lang-specific shell--ocarina"><p>Attributes currently unsupported by Ocarina: <code style='word-break: normal'>admitted_date</code>, <code style='word-break: normal'>admitted_hospital_name</code>, <code style='word-break: normal'>admitted_hospital_trust_or_board</code>, <code style='word-break: normal'>admitted_with_covid_diagnosis</code>, <code style='word-break: normal'>anonymised_care_home_code</code>, <code style='word-break: normal'>employing_hospital_name</code>, <code style='word-break: normal'>employing_hospital_trust_or_board</code>, <code style='word-break: normal'>is_care_home_resident</code>, <code style='word-break: normal'>is_care_home_worker</code>, <code style='word-break: normal'>is_hcw</code>, <code style='word-break: normal'>is_hospital_patient</code>, <code style='word-break: normal'>is_icu_patient</code></p></blockquote>

<blockquote class="lang-specific python"><p>Function not currently implemented in Ocarina Python API</p></blockquote>

<blockquote class="lang-specific plaintext--uploader"><p>Documentation for this function can be found on the CGPS uploader website linked below:</br><a href="https://metadata.docs.cog-uk.io/bulk-upload-1/bulk-upload">https://metadata.docs.cog-uk.io/bulk-upload-1/bulk-upload</a></p></blockquote>

<blockquote class="lang-specific plaintext--uploader"><p>There may be some differences between this specification and the uploader, particularly for providing Metrics and Metadata. See the Metadata and Metrics sections below for column names that are compatible with the API spec.</p></blockquote>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Options</th>
</tr>
</thead><tbody>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>adm1</code></b></br>string, <i>required</i>, <i>enum</i></td>
<td>Code of UK home nation of the patient from which the sample was collected</td>
<td><ul><li><code>UK-ENG</code></li><li><code>UK-NIR</code></li><li><code>UK-SCT</code></li><li><code>UK-WLS</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>central_sample_id</code></b></br>string, <i>required</i></td>
<td>The centrally shared ID that you will use to refer to this sample inside the consortium.</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>collection_date</code></b></br>string, <i>required</i></td>
<td>Provide where possible. When collection_date cannot be provided, you must provide received_date instead.</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>is_surveillance</code></b></br>string, <i>required</i>, <i>enum</i></td>
<td>Whether this sample was collected under the COGUK surveillance protocol.</td>
<td><ul><li><code>N</code></li><li><code>Y</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#000; background-color:#ffc107'>received_date</code></b></br>string, <i>possibly required</i></td>
<td>Date sample was first received by any lab. This date should be as close to possible to collection_date. This date must be provided if collection_date is missing.</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#17a2b8'>adm2</code></b></br>string, <i>recommended</i></td>
<td>The city or county that the patient lives in (avoid abbreviations or short hand)</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#17a2b8'>source_age</code></b></br>integer, <i>recommended</i></td>
<td>Ages should be whole numbers. Neonatals should be entered as 0.</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#17a2b8'>source_sex</code></b></br>string, <i>recommended</i>, <i>enum</i></td>
<td></td>
<td><ul><li><code>F</code></li><li><code>M</code></li><li><code>Other</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>adm2_private</code></b></br>string</td>
<td>The outer postcode for the patient&#39;s home address (first half of the postcode only)</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>admitted_date</code></b></br>string</td>
<td>If is_hospital_patient, the date (YYYY-MM-DD) that the patient was admitted to hospital</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>admitted_hospital_name</code></b></br>string</td>
<td>If is_hospital_patient, provide the name of the hospital. If you do not know the name, use HOSPITAL</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>admitted_hospital_trust_or_board</code></b></br>string</td>
<td>If is_hospital_patient, provide the name of the trust or board that administers the hospital the patient was admitted to.</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>admitted_with_covid_diagnosis</code></b></br>string, <i>enum</i></td>
<td>If is_hospital_patient, whether the patient was admitted with a COVID diagnosis</td>
<td><ul><li><code>(blank)</code></li><li><code>N</code></li><li><code>Y</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>anonymised_care_home_code</code></b></br>string</td>
<td>A code to represent a particular care home, the mapping of this code to the care home should be kept securely by your organisation. You must take care to select a code that can not link the identity of the care home.</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>biosample_source_id</code></b></br>string</td>
<td>A unique identifier of patient or environmental sample. If you have multiple samples from the same patient, enter the FIRST central_sample_id assigned to one of their samples here.</br><aside class='warning' style='padding: 1em'>Do not provide personally identifying information here. Never use an NHS number.</aside></td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>collecting_org</code></b></br>string</td>
<td>The site (eg. hospital or surgery) that this sample was originally collected by.</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>collection_pillar</code></b></br>integer, <i>enum</i></td>
<td>The pillar under which this sample was collected (e.g. 1, 2). This is likely 1, but leave blank if unsure.</td>
<td><ul><li><code>1</code></li><li><code>2</code></li><li><code>103</code></li><li><code>34613</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>employing_hospital_name</code></b></br>string</td>
<td>If is_hcw, provide the name of the employing hospital. If you do not know the name, use HOSPITAL</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>employing_hospital_trust_or_board</code></b></br>string</td>
<td>If is_hcw, provide the name of the employing trust or board.</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>is_care_home_resident</code></b></br>string, <i>enum</i></td>
<td></td>
<td><ul><li><code>(blank)</code></li><li><code>N</code></li><li><code>Y</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>is_care_home_worker</code></b></br>string, <i>enum</i></td>
<td></td>
<td><ul><li><code>(blank)</code></li><li><code>N</code></li><li><code>Y</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>is_hcw</code></b></br>string, <i>enum</i></td>
<td>Whether the sample was collected from a healthcare worker. This includes hospital-associated workers.</td>
<td><ul><li><code>(blank)</code></li><li><code>N</code></li><li><code>Y</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>is_hospital_patient</code></b></br>string, <i>enum</i></td>
<td></td>
<td><ul><li><code>(blank)</code></li><li><code>N</code></li><li><code>Y</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>is_icu_patient</code></b></br>string, <i>enum</i></td>
<td></td>
<td><ul><li><code>(blank)</code></li><li><code>N</code></li><li><code>Y</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>root_sample_id</code></b></br>string</td>
<td>Identifier assigned to this sample from one of the health agencies (eg. PHE samples will be prefixed with H20). This is necessary for linking samples to private patient metadata later.</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>sample_type_collected</code></b></br>string, <i>enum</i></td>
<td></td>
<td><ul><li><code>BAL</code></li><li><code>aspirate</code></li><li><code>dry swab</code></li><li><code>sputum</code></li><li><code>swab</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>sample_type_received</code></b></br>string, <i>enum</i></td>
<td></td>
<td><ul><li><code>culture</code></li><li><code>extract</code></li><li><code>lysate</code></li><li><code>primary</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>sender_sample_id</code></b></br>string</td>
<td>If you are permitted, provide the identifier that was sent by your laboratory to SGSS here.</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>swab_site</code></b></br>string, <i>enum</i></td>
<td>Required if sample_type_collected is swab</td>
<td><ul><li><code>endotracheal</code></li><li><code>nose</code></li><li><code>nose-throat</code></li><li><code>rectal</code></li><li><code>throat</code></li></ul></td>
</tr>
</tbody></table>
<h3 id='metrics'>Metrics</h3>

<blockquote class="lang-specific shell--ocarina"><p>To provide metrics with Ocarina:</p></blockquote>

<div class="highlight"><pre class="highlight shell tab-shell--ocarina"><code>ocarina put biosample <span class="se">\</span>
    ...
    <span class="nt">--metric</span> ct.# ct_value 25 <span class="se">\</span>
    <span class="nt">--metric</span> ct.# test_kit INHOUSE <span class="se">\</span>
    <span class="nt">--metric</span> ct.# test_platform INHOUSE <span class="se">\</span>
    <span class="nt">--metric</span> ct.# test_target ORF8 
</code></pre></div>

<blockquote class="lang-specific shell--ocarina"><p>If a particular metric supports storing multiple records, you can provide them by incrementing a numerical suffix after the metric's namespace: <i>e.g.</i> <code>--metric name.1 key value</code> ... <code>--metric name.N key value.</code></blockquote>

<blockquote class="lang-specific plaintext--uploader"><p>Some metrics can be provided via the uploader using these column names:</p>
<ul><li><code>ct ct_value</code> ▶ <code>ct_#_ct_value (limit 2)</code></li>
<li><code>ct test_kit</code> ▶ <code>ct_#_test_kit (limit 2)</code></li>
<li><code>ct test_platform</code> ▶ <code>ct_#_test_platform (limit 2)</code></li>
<li><code>ct test_target</code> ▶ <code>ct_#_test_target (limit 2)</code></li></ul>
</blockquote>

<p>Some artifacts in Majora can be annotated with additional Metric objects.
Metric objects group together specific information that allows for additional description of an artifact, but does not belong in the artifact itself.
Each metric has its own namespace, containing a fixed set of keys. Some or all of the keys may need a value to validate the Metric.
This endpoint allows you to submit the following Metrics:</p>

<table><thead>
<tr>
<th>Namespace</th>
<th>Name</th>
<th>Description</th>
<th>Options</th>
</tr>
</thead><tbody>
<tr>
<td><b><code>ct</code></b></td>
<td><b><code>ct_value</code></b></td>
<td>Cycle threshold value. Cannot be negative. Code an inconclusive or negative test as 0.</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code>ct</code></b></td>
<td><b><code>test_kit</code></b></td>
<td></td>
<td><ul><li><code>(blank)</code></li><li><code>ABBOTT</code></li><li><code>ALINITY</code></li><li><code>ALTONA</code></li><li><code>AMPLIDIAG</code></li><li><code>AUSDIAGNOSTICS</code></li><li><code>BD</code></li><li><code>BOSPHORE</code></li><li><code>INHOUSE</code></li><li><code>INVITROGEN</code></li><li><code>QIASTAT</code></li><li><code>ROCHE</code></li><li><code>SEEGENE</code></li><li><code>TAQPATH_HT</code></li><li><code>VIASURE</code></li><li><code>XPERT</code></li></ul></td>
</tr>
<tr>
<td><b><code>ct</code></b></td>
<td><b><code>test_platform</code></b></td>
<td></td>
<td><ul><li><code>(blank)</code></li><li><code>ABBOTT_ALINITY</code></li><li><code>ABBOTT_M2000</code></li><li><code>ALTONA</code></li><li><code>ALTOSTAR_AM16</code></li><li><code>AMPLIDIAG_EASY</code></li><li><code>APPLIED_BIO_7500</code></li><li><code>AUSDIAGNOSTICS</code></li><li><code>BD_MAX</code></li><li><code>CEPHEID_XPERT</code></li><li><code>ELITE_INGENIUS</code></li><li><code>INHOUSE</code></li><li><code>PANTHER</code></li><li><code>QIAGEN_ROTORGENE</code></li><li><code>QIASTAT_DX</code></li><li><code>ROCHE_COBAS</code></li><li><code>ROCHE_FLOW</code></li><li><code>ROCHE_LIGHTCYCLER</code></li><li><code>SEEGENE_NIMBUS</code></li><li><code>THERMO_AMPLITUDE</code></li></ul></td>
</tr>
<tr>
<td><b><code>ct</code></b></td>
<td><b><code>test_target</code></b></td>
<td></td>
<td><ul><li><code>(blank)</code></li><li><code>E</code></li><li><code>N</code></li><li><code>ORF1AB</code></li><li><code>ORF8</code></li><li><code>RDRP</code></li><li><code>RDRP+N</code></li><li><code>S</code></li></ul></td>
</tr>
</tbody></table>

<h3 id='metadata'>Metadata</h3>

<blockquote class="lang-specific shell--ocarina"><p>To provide metadata with Ocarina:</p></blockquote>

<div class="highlight"><pre class="highlight shell tab-shell--ocarina"><code>ocarina put biosample <span class="se">\</span>
    ...
    <span class="nt">-m</span> epi cluster CLUSTER8 <span class="se">\</span>
    <span class="nt">-m</span> investigation cluster <span class="s1">'Ward 0'</span> <span class="se">\</span>
    <span class="nt">-m</span> investigation name <span class="s1">'West Midlands HCW'</span> <span class="se">\</span>
    <span class="nt">-m</span> investigation site QEHB 
</code></pre></div>

<blockquote class="lang-specific plaintext--uploader"><p>Some metadata can be provided via the uploader using these column names:</p>
<ul><li><code>epi cluster</code> ▶ <code>epi_cluster</code></li>
<li><code>investigation cluster</code> ▶ <code>investigation_cluster</code></li>
<li><code>investigation name</code> ▶ <code>investigation_name</code></li>
<li><code>investigation site</code> ▶ <code>investigation_site</code></li></ul>
</blockquote>

<p>Any artifact in Majora can be &#39;tagged&#39; with arbitrary key-value metadata.
Unlike Metrics, there is no fixed terminology or validation on the keys or their values. Like Metrics, to aid organisation, metadata keys are grouped into namespaces.
This endpoint has &#39;reserved&#39; metadata keys that should only be used to provide meaningful information:</p>

<table><thead>
<tr>
<th>Namespace</th>
<th>Name</th>
<th>Description</th>
<th>Options</th>
</tr>
</thead><tbody>
<tr>
<td><b><code>epi</code></b></td>
<td><b><code>epi_cluster</code></b></td>
<td>A local identifier for a known case cluster</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code>investigation</code></b></td>
<td><b><code>investigation_cluster</code></b></td>
<td>An optional identifier for a cluster within an investigation</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code>investigation</code></b></td>
<td><b><code>investigation_name</code></b></td>
<td>A named investigation (eg. a surveillance or directed case group)</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code>investigation</code></b></td>
<td><b><code>investigation_site</code></b></td>
<td>An optional site name or code to differentiate between sites if the investigation covers more than one site.</td>
<td><ul></ul></td>
</tr>
</tbody></table>

<h3 id='scopes'>Scopes</h3>

<ul>

<li><b><code style='color:#fff; background-color:#6c757d'>majora2.add_biosampleartifact</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.add_biosamplesource</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.add_biosourcesamplingprocess</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.change_biosampleartifact</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.change_biosamplesource</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.change_biosourcesamplingprocess</code></b></li>
</ul>

<h2 id='add-one-or-more-empty-biosamples-to-majora'>Add one or more empty biosamples to Majora</h2>

<p><code>/artifact/biosample/addempty/</code></p>

<h3 id='attributes'>Attributes</h3><div class="highlight"><pre class="highlight json tab-json--raw"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"biosamples"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"central_sample_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BIRM-12345"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sender_sample_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LAB12345"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6e06392f-e030-4cf9-911a-8dc9f2d4e714"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"majora-sam"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote class="lang-specific shell--ocarina"><p>Minimal Ocarina command with mandatory parameters:</p></blockquote>
<div class="highlight"><pre class="highlight shell tab-shell--ocarina"><code>ocarina empty biosample <span class="se">\</span>
    <span class="nt">--central-sample-id</span> BIRM-12345 
</code></pre></div>
<blockquote class="lang-specific shell--ocarina"><p>Full Ocarina command example:</p></blockquote>
<div class="highlight"><pre class="highlight shell tab-shell--ocarina"><code>ocarina empty biosample <span class="se">\</span>
    <span class="nt">--central-sample-id</span> BIRM-12345 <span class="se">\</span>
    <span class="nt">--sender-sample-id</span> LAB12345 
</code></pre></div>
<blockquote class="lang-specific python"><p>Function not currently implemented in Ocarina Python API</p></blockquote>

<blockquote class="lang-specific plaintext--uploader"><p>Function not currently implemented in CGPS Metadata Uploader</p></blockquote>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Options</th>
</tr>
</thead><tbody>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>central_sample_id</code></b></br>string, <i>required</i></td>
<td>The centrally shared ID that you will use to refer to this sample inside the consortium.</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>sender_sample_id</code></b></br>string</td>
<td>If you are permitted, provide the identifier that was sent by your laboratory to SGSS here.</td>
<td><ul></ul></td>
</tr>
</tbody></table>
<h3 id='scopes'>Scopes</h3>

<ul>

<li><b><code style='color:#fff; background-color:#dc3545'>majora2.force_add_biosampleartifact</code> (This scope must be requested)</b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.add_biosampleartifact</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.add_biosourcesamplingprocess</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.change_biosampleartifact</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.change_biosourcesamplingprocess</code></b></li>
</ul>
<h1 id='library'>Library</h1>
<h2 id='add-a-sequencing-library-to-majora'>Add a sequencing library to Majora</h2>

<p><code>/artifact/library/add/</code></p>

<h3 id='attributes'>Attributes</h3><div class="highlight"><pre class="highlight json tab-json--raw"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"biosamples"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"barcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"central_sample_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BIRM-12345"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"library_primers"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ARTIC v3"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"library_protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ARTIC v3 (LoCost)"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"library_selection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PCR"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"library_source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VIRAL_RNA"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"library_strategy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AMPLICON"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"artic"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"artic_primers"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"artic_protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v3 (LoCost)"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"sequencing_org_received_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-01-14"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"library_layout_config"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAIRED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"library_layout_insert_length"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nl">"library_layout_read_length"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
    </span><span class="nl">"library_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOOT-LIBRARY-20200322"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"library_seq_kit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Illumina MiSeq v3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"library_seq_protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MiSeq 150 Cycle"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6e06392f-e030-4cf9-911a-8dc9f2d4e714"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"majora-sam"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote class="lang-specific shell--ocarina"><p>Minimal Ocarina command with mandatory parameters:</p></blockquote>
<div class="highlight"><pre class="highlight shell tab-shell--ocarina"><code>ocarina put library <span class="se">\</span>
    <span class="nt">--biosample</span> BIRM-12345 VIRAL_RNA PCR AMPLICON <span class="s1">'ARTIC v3 (LoCost)'</span> <span class="s1">'ARTIC v3'</span> <span class="se">\</span>
    <span class="nt">--library-layout-config</span> PAIRED <span class="se">\</span>
    <span class="nt">--library-name</span> HOOT-LIBRARY-20200322 <span class="se">\</span>
    <span class="nt">--library-seq-kit</span> <span class="s1">'Illumina MiSeq v3'</span> <span class="se">\</span>
    <span class="nt">--library-seq-protocol</span> <span class="s1">'MiSeq 150 Cycle'</span> 
</code></pre></div>
<blockquote class="lang-specific shell--ocarina"><p>Full Ocarina command example:</p></blockquote>
<div class="highlight"><pre class="highlight shell tab-shell--ocarina"><code>ocarina put library <span class="se">\</span>
    <span class="nt">--biosample</span> BIRM-12345 VIRAL_RNA PCR AMPLICON <span class="s1">'ARTIC v3 (LoCost)'</span> <span class="s1">'ARTIC v3'</span> <span class="se">\</span>
    <span class="nt">--library-layout-config</span> PAIRED <span class="se">\</span>
    <span class="nt">--library-name</span> HOOT-LIBRARY-20200322 <span class="se">\</span>
    <span class="nt">--library-seq-kit</span> <span class="s1">'Illumina MiSeq v3'</span> <span class="se">\</span>
    <span class="nt">--library-seq-protocol</span> <span class="s1">'MiSeq 150 Cycle'</span> <span class="se">\</span>
    <span class="nt">--library-layout-insert-length</span> 100 <span class="se">\</span>
    <span class="nt">--library-layout-read-length</span> 300 <span class="se">\</span>
    <span class="nt">--sequencing-org-received-date</span> 2021-01-14 
</code></pre></div>
<blockquote class="lang-specific shell--ocarina"><p>Attributes merged into positional arguments by Ocarina:<ul>
<li><code>biosample</code> ▶ <code>central_sample_id</code> <code>library_source</code> <code>library_selection</code> <code>library_strategy</code> <code>library_protocol</code> <code>library_primers</code></li>
</ul></blockquote>
<blockquote class="lang-specific shell--ocarina"><p>Attributes currently unsupported by Ocarina: <code style='word-break: normal'>barcode</code></p></blockquote>
<blockquote class="lang-specific python"><p>Function not currently implemented in Ocarina Python API</p></blockquote>
<blockquote class="lang-specific plaintext--uploader"><p>Documentation for this function can be found on the CGPS uploader website linked below:</br><a href="https://metadata.docs.cog-uk.io/bulk-upload-1/samples-and-sequencing">https://metadata.docs.cog-uk.io/bulk-upload-1/samples-and-sequencing</a></p></blockquote>
<blockquote class="lang-specific plaintext--uploader"><p>There may be some differences between this specification and the uploader, particularly for providing Metrics and Metadata. See the Metadata and Metrics sections below for column names that are compatible with the API spec.</p></blockquote>
<blockquote class="lang-specific plaintext--uploader"><p>Some attributes are named differently on the CGPS uploader:</p>
<ul><li><code>library_primers</code> ▶ <code>artic_primers</code></li>
<li><code>library_protocol</code> ▶ <code>artic_protocol</code></li></ul>
</blockquote>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Options</th>
</tr>
</thead><tbody>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>central_sample_id</code></b></br>string, <i>required</i></td>
<td></td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>library_layout_config</code></b></br>string, <i>required</i>, <i>enum</i></td>
<td></td>
<td><ul><li><code>PAIRED</code></li><li><code>SINGLE</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>library_name</code></b></br>string, <i>required</i></td>
<td>A unique, somewhat memorable name for your library.</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>library_selection</code></b></br>string, <i>required</i>, <i>enum</i></td>
<td></td>
<td><ul><li><code>OTHER</code></li><li><code>PCR</code></li><li><code>RANDOM</code></li><li><code>RANDOM_PCR</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>library_seq_kit</code></b></br>string, <i>required</i></td>
<td></td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>library_seq_protocol</code></b></br>string, <i>required</i></td>
<td></td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>library_source</code></b></br>string, <i>required</i>, <i>enum</i></td>
<td></td>
<td><ul><li><code>GENOMIC</code></li><li><code>METAGENOMIC</code></li><li><code>METATRANSCRIPTOMIC</code></li><li><code>OTHER</code></li><li><code>TRANSCRIPTOMIC</code></li><li><code>VIRAL_RNA</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>library_strategy</code></b></br>string, <i>required</i>, <i>enum</i></td>
<td></td>
<td><ul><li><code>AMPLICON</code></li><li><code>OTHER</code></li><li><code>TARGETED_CAPTURE</code></li><li><code>WGA</code></li><li><code>WGS</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#17a2b8'>library_primers</code></b></br>string, <i>recommended</i></td>
<td></td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#17a2b8'>library_protocol</code></b></br>string, <i>recommended</i></td>
<td></td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>barcode</code></b></br>string</td>
<td></td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>library_layout_insert_length</code></b></br>integer</td>
<td></td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>library_layout_read_length</code></b></br>integer</td>
<td></td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>sequencing_org_received_date</code></b></br>string</td>
<td>Date sample was received by the organisation which sequenced it. This date is used for tracking sample turnaround time.</td>
<td><ul></ul></td>
</tr>
</tbody></table>
<h3 id='metadata'>Metadata</h3>

<blockquote class="lang-specific shell--ocarina"><p>To provide metadata with Ocarina:</p></blockquote>

<div class="highlight"><pre class="highlight shell tab-shell--ocarina"><code>ocarina put library <span class="se">\</span>
    ...
    <span class="nt">-m</span> artic primers 3 <span class="se">\</span>
    <span class="nt">-m</span> artic protocol <span class="s1">'v3 (LoCost)'</span> 
</code></pre></div>

<blockquote class="lang-specific plaintext--uploader"><p>Some metadata can be provided via the uploader using these column names:</p>
<ul><li><code>artic primers</code> ▶ <code>artic_primers</code></li>
<li><code>artic protocol</code> ▶ <code>artic_protocol</code></li></ul>
</blockquote>

<p>Any artifact in Majora can be &#39;tagged&#39; with arbitrary key-value metadata.
Unlike Metrics, there is no fixed terminology or validation on the keys or their values. Like Metrics, to aid organisation, metadata keys are grouped into namespaces.
This endpoint has &#39;reserved&#39; metadata keys that should only be used to provide meaningful information:</p>

<table><thead>
<tr>
<th>Namespace</th>
<th>Name</th>
<th>Description</th>
<th>Options</th>
</tr>
</thead><tbody>
<tr>
<td><b><code>artic</code></b></td>
<td><b><code>artic_primers</code></b></td>
<td>The version number of the ARTIC primer set (if used) to prepare this library</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code>artic</code></b></td>
<td><b><code>artic_protocol</code></b></td>
<td>The version number of the ARTIC protocol (if used) to prepare this library</td>
<td><ul></ul></td>
</tr>
</tbody></table>

<h3 id='scopes'>Scopes</h3>

<ul>

<li><b><code style='color:#fff; background-color:#6c757d'>majora2.add_biosampleartifact</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.add_libraryartifact</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.add_librarypoolingprocess</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.change_biosampleartifact</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.change_libraryartifact</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.change_librarypoolingprocess</code></b></li>
</ul>
<h1 id='sequencing'>Sequencing</h1>
<h2 id='add-a-sequencing-run-to-majora'>Add a sequencing run to Majora</h2>

<p><code>/process/sequencing/add/</code></p>

<h3 id='attributes'>Attributes</h3><div class="highlight"><pre class="highlight json tab-json--raw"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"library_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOOT-LIBRARY-20200322"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"runs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"bioinfo_pipe_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ARTIC Pipeline (iVar)"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"bioinfo_pipe_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.3.0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YYYY-MM-DD HH:MM"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"flowcell_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABCDEF"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"flowcell_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v3"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_make"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ILLUMINA"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_model"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MiSeq"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"run_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YYMMDD_AB000000_1234_ABCDEFGHI0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YYYY-MM-DD HH:MM"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6e06392f-e030-4cf9-911a-8dc9f2d4e714"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"majora-sam"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote class="lang-specific shell--ocarina"><p>Minimal Ocarina command with mandatory parameters:</p></blockquote>
<div class="highlight"><pre class="highlight shell tab-shell--ocarina"><code>ocarina put sequencing <span class="se">\</span>
    <span class="nt">--instrument-make</span> ILLUMINA <span class="se">\</span>
    <span class="nt">--instrument-model</span> MiSeq <span class="se">\</span>
    <span class="nt">--library-name</span> HOOT-LIBRARY-20200322 <span class="se">\</span>
    <span class="nt">--run-name</span> YYMMDD_AB000000_1234_ABCDEFGHI0 
</code></pre></div>
<blockquote class="lang-specific shell--ocarina"><p>Full Ocarina command example:</p></blockquote>
<div class="highlight"><pre class="highlight shell tab-shell--ocarina"><code>ocarina put sequencing <span class="se">\</span>
    <span class="nt">--instrument-make</span> ILLUMINA <span class="se">\</span>
    <span class="nt">--instrument-model</span> MiSeq <span class="se">\</span>
    <span class="nt">--library-name</span> HOOT-LIBRARY-20200322 <span class="se">\</span>
    <span class="nt">--run-name</span> YYMMDD_AB000000_1234_ABCDEFGHI0 <span class="se">\</span>
    <span class="nt">--bioinfo-pipe-name</span> <span class="s1">'ARTIC Pipeline (iVar)'</span> <span class="se">\</span>
    <span class="nt">--bioinfo-pipe-version</span> 1.3.0 <span class="se">\</span>
    <span class="nt">--end-time</span> <span class="s1">'YYYY-MM-DD HH:MM'</span> <span class="se">\</span>
    <span class="nt">--flowcell-id</span> ABCDEF <span class="se">\</span>
    <span class="nt">--flowcell-type</span> v3 <span class="se">\</span>
    <span class="nt">--start-time</span> <span class="s1">'YYYY-MM-DD HH:MM'</span> 
</code></pre></div>
<blockquote class="lang-specific python"><p>Function not currently implemented in Ocarina Python API</p></blockquote>

<blockquote class="lang-specific plaintext--uploader"><p>Documentation for this function can be found on the CGPS uploader website linked below:</br><a href="https://metadata.docs.cog-uk.io/bulk-upload-1/samples-and-sequencing">https://metadata.docs.cog-uk.io/bulk-upload-1/samples-and-sequencing</a></p></blockquote>

<blockquote class="lang-specific plaintext--uploader"><p>There may be some differences between this specification and the uploader, particularly for providing Metrics and Metadata. See the Metadata and Metrics sections below for column names that are compatible with the API spec.</p></blockquote>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Options</th>
</tr>
</thead><tbody>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>instrument_make</code></b></br>string, <i>required</i>, <i>enum</i></td>
<td></td>
<td><ul><li><code>ILLUMINA</code></li><li><code>ION_TORRENT</code></li><li><code>OXFORD_NANOPORE</code></li></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>instrument_model</code></b></br>string, <i>required</i></td>
<td></td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>library_name</code></b></br>string, <i>required</i></td>
<td>The name of the library as submitted to add_library</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>run_name</code></b></br>string, <i>required</i></td>
<td>A unique name that corresponds to your run. Ideally, use the name generated by your sequencing instrument.</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#17a2b8'>bioinfo_pipe_name</code></b></br>string, <i>recommended</i></td>
<td>The name of the bioinformatics pipeline used for downstream analysis of this run</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#17a2b8'>bioinfo_pipe_version</code></b></br>string, <i>recommended</i></td>
<td>The version number of the bioinformatics pipeline used for downstream analysis of this run</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>end_time</code></b></br>string</td>
<td></td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>flowcell_id</code></b></br>string</td>
<td></td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>flowcell_type</code></b></br>None</td>
<td></td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#6c757d'>start_time</code></b></br>string</td>
<td></td>
<td><ul></ul></td>
</tr>
</tbody></table>
<h3 id='scopes'>Scopes</h3>

<ul>

<li><b><code style='color:#fff; background-color:#6c757d'>majora2.add_dnasequencingprocess</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.change_dnasequencingprocess</code></b></li>
<li><b><code style='color:#fff; background-color:#6c757d'>majora2.change_libraryartifact</code></b></li>
</ul>
<h1 id='published-artifact-group'>Published Artifact Group</h1>
<h2 id='suppress-a-published-artifact-group-pag-from-the-data-set'>Suppress a Published Artifact Group (PAG) from the data set</h2>

<p><code>/group/pag/suppress/</code></p>

<h3 id='attributes'>Attributes</h3><div class="highlight"><pre class="highlight json tab-json--raw"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"publish_group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COGUK/BIRM-12345/BIRM:YYMMDD_AB000000_1234_ABCDEFGHI0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WRONG_SEQUENCE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6e06392f-e030-4cf9-911a-8dc9f2d4e714"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"majora-sam"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote class="lang-specific shell--ocarina"><p>Minimal Ocarina command with mandatory parameters:</p></blockquote>
<div class="highlight"><pre class="highlight shell tab-shell--ocarina"><code>ocarina pag suppress <span class="se">\</span>
    <span class="nt">--publish-group</span> COGUK/BIRM-12345/BIRM:YYMMDD_AB000000_1234_ABCDEFGHI0 <span class="se">\</span>
    <span class="nt">--reason</span> WRONG_SEQUENCE 
</code></pre></div>
<blockquote class="lang-specific shell--ocarina"><p>Full Ocarina command example:</p></blockquote>
<div class="highlight"><pre class="highlight shell tab-shell--ocarina"><code>ocarina pag suppress <span class="se">\</span>
    <span class="nt">--publish-group</span> COGUK/BIRM-12345/BIRM:YYMMDD_AB000000_1234_ABCDEFGHI0 <span class="se">\</span>
    <span class="nt">--reason</span> WRONG_SEQUENCE 
</code></pre></div>
<blockquote class="lang-specific python"><p>Function not currently implemented in Ocarina Python API</p></blockquote>

<blockquote class="lang-specific plaintext--uploader"><p>Function not currently implemented in CGPS Metadata Uploader</p></blockquote>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Options</th>
</tr>
</thead><tbody>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>publish_group</code></b></br>string, <i>required</i></td>
<td>Published Artifact Group (PAG) name</td>
<td><ul></ul></td>
</tr>
<tr>
<td><b><code style='color:#fff; background-color:#dc3545'>reason</code></b></br>string, <i>required</i>, <i>enum</i></td>
<td></td>
<td><ul><li><code>CONTROL_FAIL</code></li><li><code>WRONG_BARCODE</code></li><li><code>WRONG_METADATA</code></li><li><code>WRONG_SEQUENCE</code></li></ul></td>
</tr>
</tbody></table>
<h3 id='scopes'>Scopes</h3>

<ul>

<li><b><code style='color:#fff; background-color:#6c757d'>majora2.can_suppress_pags_via_api</code></b></li>
</ul>
<h1 id='errors'>Errors</h1>
<p>The Majora API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid or unauthorized (Majora never sends a 401).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- You are not permitted to make this request.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- Your requested Artifact or Process could not be found.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many resources, try adding a small delay between queries.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- Your action generated an error. Try again later. If the error persists, report to an administrator.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell--ocarina">ocarina</a>
                <a href="#" data-language-name="plaintext--uploader">uploader</a>
                <a href="#" data-language-name="json--raw">json</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
